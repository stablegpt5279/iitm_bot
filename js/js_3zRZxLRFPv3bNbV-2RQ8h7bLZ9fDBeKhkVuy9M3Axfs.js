"use strict";var json_eventdata,Events=Events||{},today=moment(),eventdates=[],latest_events=[],featured_event=[];Events={init:function(){jQuery("#datepicker").datetimepicker({inline:!0,useCurrent:!0,minDate:new Date}).on("dp.change",(function(e){var t=moment(e.date).format("MM/DD/Y");Events.showActiveEvents(t,"first")})).on("dp.update",(function(e){Events.getLatestEvents()})),Events.triggerEventData()},triggerEventData:function(){var e=[];if((json_eventdata||null!=json_eventdata)&&(e=JSON.parse(json_eventdata)),e.length>0){var t=moment().format("MM/DD/YYYY");jQuery.each(e,(function(e,n){var a=moment(n.date).format("MM/DD/YYYY");-1==jQuery.inArray(a,eventdates)&&(eventdates.push(a),featured_event[a]=[]),featured_event[a].push(n),new Date(n.date)>=new Date(t)&&latest_events.push(new Date(n.date))})),Events.getLatestEvents()}else{jQuery("#event_section").html('<div class="section__card"><div class=""><img src="/themes/custom/iitm/assets/images/no_img/no_events_m3.png" ></div></div>')}},getLatestEvents:function(){latest_events.sort((function(e,t){return new Date(e)-new Date(t)}));var e=moment(latest_events[0]).format("MM/DD/Y");eventdates.length>0&&jQuery("#datepicker").data("DateTimePicker").enabledDates(eventdates),Events.showActiveEvents(e,"first")},showActiveEvents:function(e,t){eventdates.length>0&&("first"==t&&jQuery("#datepicker .datepicker").find('[data-day="'+e+'"]').addClass("active eventsdate__selected"),this.highlightDates(),this.eventSlick(e))},highlightDates:function(){eventdates.length>0&&jQuery.each(eventdates,(function(e,t){moment(t,"MM/DD/Y").diff(today,"days")<0||jQuery("#datepicker .datepicker").find('[data-day="'+t+'"]').addClass("active")}))},eventSlick:function(e){var t=this.renderEventsHtml(e);if(!t)return t;jQuery("#event_section").html(t),jQuery("#event_section .infoSlider").slick({dots:!1,arrows:!0,infinite:!0,speed:1500,autoplaySpeed:6e3,slidesToShow:1,slidesToScroll:1,autoplay:!1,pauseOnHover:!1,useTransform:!0,draggable:!0,easing:"easeOutElastic"}),iitm_app.setNoImage()},renderEventsHtml:function(e){var t="";return null!=featured_event[e]&&(t+='<div class="infoSlider owl-carousel owl-theme">',jQuery.each(featured_event[e],(function(e,n){var a="";n.no_img&&(a=" data-noimg=1 data-noimg-category="+n.no_img),t+="<a href = "+n.url+" title = "+n.title+' class="eventsdate__setposition" > <div class="section__card"><div class="section__cardimg"><img src='+n.img+" alt="+n.title+a+'><div class="section__cardposition"><p>'+n.display_date+"</p><p>"+n.title+"</p></div></div></div></a>"})),t+="</div>")}},jQuery,Drupal,Events.init();